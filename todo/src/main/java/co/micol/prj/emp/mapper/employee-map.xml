<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.company.employee.EmployeeMapper"> 

<select id="selectSearch" resultType="java.util.Map">
	select employee_id, last_name, department_name
	  from employees a, departments b
	 where a.department_id = b.department_id 
</select>

<select id="selectJobs" resultType="com.company.employee.Jobs">
	select job_id, job_title 
	  from jobs
	 order by job_id 
</select>

<select id="selectDepartments" resultType="com.company.employee.Departments">
	select a.department_id, a.department_name, b.city, a.manager_id, c.first_name || c.last_name as manager_name 
	  from departments a, locations b, employees c
	 where a.location_id = b.location_id 
	   and a.manager_id = c.employee_id
	 <if test="department_id != null">  
       and a.department_id = #{department_id}	   
     </if>
	 order by a.department_id 
</select>

<select id="selectDepartment" resultType="com.company.employee.Departments">
	select a.department_id, a.department_name, b.city, a.manager_id, c.first_name || c.last_name as manager_name 
	  from departments a, locations b, employees c
	 where a.location_id = b.location_id 
	   and a.manager_id = c.employee_id
       and a.department_id = #{department_id}	   
	 order by a.department_id 
</select>

<insert id="insertDepartments">
	insert into DEPARTMENTS (DEPARTMENTS.DEPARTMENT_ID, DEPARTMENTS.DEPARTMENT_NAME)
	values( #{department_id}, #{department_name})
</insert>
</mapper>